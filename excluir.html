<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excluir Veículo</title>
    <link rel="stylesheet" href="style_index.css"> <!-- Para header/footer -->
    <link rel="stylesheet" href="style_crud.css"> <!-- Para o conteúdo -->
</head>
<body>
    <header-placeholder></header-placeholder>

    <main class="main-content">
        <div class="content-card">
            <h2>Excluir Veículo</h2>
            <p>Insira a placa do veículo que deseja remover do sistema.</p>
            
            <form id="delete-form" class="crud-form">
                <div class="form-group">
                    <label for="placa">Placa do Veículo</label>
                    <input type="text" id="placa" name="placa" placeholder="Ex: ABC1234" required>
                </div>
                <button type="submit" class="btn btn-delete">Excluir</button>
            </form>

            <div class="crud-navigation">
                <a href="cadastrar_veiculo.html" class="btn btn-create">Cadastrar</a>
                <a href="listar.html" class="btn btn-read">Listar</a>
                <a href="atualizar.html" class="btn btn-update">Atualizar</a>
                <a href="login.html" class="btn btn-secondary">Voltar ao Menu</a>
            </div>
        </div>
    </main>

    <footer-placeholder></footer-placeholder>
    <script src="main.js"></script>
    <script>
        document.getElementById('delete-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Impede o envio padrão do formulário

            const placaToDelete = document.getElementById('placa').value.trim();
            if (!placaToDelete) {
                alert('Por favor, insira uma placa.');
                return;
            }

            let vehicles = JSON.parse(localStorage.getItem('vehicles')) || [];
            const vehicleIndex = vehicles.findIndex(v => v.placa === placaToDelete);

            if (vehicleIndex !== -1) {
                if (confirm(`Tem certeza que deseja excluir o veículo com a placa ${placaToDelete}?`)) {
                    vehicles.splice(vehicleIndex, 1); // Remove o veículo do array
                    localStorage.setItem('vehicles', JSON.stringify(vehicles)); // Atualiza o localStorage
                    alert('Veículo excluído com sucesso!');
                    window.location.href = 'listar.html'; // Redireciona para a lista
                }
            } else {
                alert('Veículo com esta placa não encontrado.');
            }
        });
    </script>
</body>
</html>